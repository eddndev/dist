<!DOCTYPE html><html lang="en" class="h-full"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Performance characteristics and limitations of Achronyme"><meta name="generator" content="Astro v5.15.8"><link rel="canonical" href="http://localhost:4321/docs/advanced-topics/performance/"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><title>Performance and Limitations | Achronyme</title><!-- Preload fonts --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="/_astro/_slug_.DqW8sfBE.css">
<style>[data-astro-cid-k5z7lb4y][x-cloak]{display:none!important}
</style><script type="module" src="/_astro/page.BE54bNVT.js"></script></head> <body class="h-full bg-slate-950" x-data>  <div class="min-h-full"> <header class="sticky top-0 z-50 border-b border-slate-800 bg-slate-950/95 backdrop-blur supports-[backdrop-filter]:bg-slate-950/80"> <div class="mx-auto max-w-8xl px-4 sm:px-6 lg:px-8"> <div class="flex h-16 items-center justify-between"> <!-- Logo --> <div class="flex items-center"> <a href="/" class="flex items-center space-x-3"> <picture> <source srcset="/logo.avif" type="image/avif"> <img src="/logo.png" alt="Achronyme Logo" class="h-8 w-8" onerror="this.parentElement.style.display='none'; this.parentElement.nextElementSibling.style.display='flex';"> </picture> <div class="h-8 w-8 rounded-lg bg-gradient-to-br from-purple-500 to-violet-600 flex items-center justify-center hidden"> <span class="text-white font-bold text-sm">A</span> </div> <span class="font-display text-xl font-semibold text-white">
Achronyme
</span> </a> </div> <!-- Center navigation --> <nav class="hidden md:flex items-center justify-center flex-1 space-x-6"> <a href="/docs" class="text-sm font-medium text-slate-400 hover:text-white transition-colors">
Documentation
</a> <a href="https://github.com/achronyme/achronyme-core" target="_blank" rel="noopener noreferrer" class="text-sm font-medium text-slate-400 hover:text-white transition-colors inline-flex items-center"> <svg class="mr-1.5 h-4 w-4" fill="currentColor" viewBox="0 0 24 24"> <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path> </svg>
GitHub
</a> </nav> <!-- Right side - Changelog link + Mobile menu button --> <div class="flex items-center space-x-4"> <a href="/changelog" class="hidden md:block text-sm font-medium text-slate-400 hover:text-white transition-colors">
Changelog
</a> <button type="button" class="md:hidden rounded-md p-2 text-slate-400 hover:bg-slate-800 hover:text-white" @click="$store.nav.toggle()"> <span class="sr-only">Open menu</span> <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path> </svg> </button> </div> </div> </div> </header> <div class="fixed inset-0 z-40 lg:hidden" x-show="$store.nav.open" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" x-cloak data-astro-cid-k5z7lb4y> <!-- Backdrop --> <div class="fixed inset-0 bg-slate-950/80 backdrop-blur-sm" @click="$store.nav.close()" data-astro-cid-k5z7lb4y></div> <!-- Sidebar --> <div class="fixed inset-y-0 left-0 w-full max-w-xs bg-slate-900 shadow-xl" x-show="$store.nav.open" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="-translate-x-full" x-transition:enter-end="translate-x-0" x-transition:leave="transition ease-in duration-150" x-transition:leave-start="translate-x-0" x-transition:leave-end="-translate-x-full" data-astro-cid-k5z7lb4y> <div class="flex h-16 items-center justify-between px-6 border-b border-slate-800" data-astro-cid-k5z7lb4y> <a href="/" class="flex items-center space-x-2" @click="$store.nav.close()" data-astro-cid-k5z7lb4y> <picture data-astro-cid-k5z7lb4y> <source srcset="/logo.avif" type="image/avif" data-astro-cid-k5z7lb4y> <img src="/logo.png" alt="Achronyme Logo" class="h-8 w-8" onerror="this.parentElement.style.display='none'; this.parentElement.nextElementSibling.style.display='flex';" data-astro-cid-k5z7lb4y> </picture> <div class="h-8 w-8 rounded-lg bg-gradient-to-br from-purple-500 to-violet-600 flex items-center justify-center hidden" data-astro-cid-k5z7lb4y> <span class="text-white font-bold text-sm" data-astro-cid-k5z7lb4y>A</span> </div> <span class="font-display text-xl font-semibold text-white" data-astro-cid-k5z7lb4y>
Achronyme
</span> </a> <button type="button" class="rounded-md p-2 text-slate-400 hover:bg-slate-800 hover:text-white" @click="$store.nav.close()" data-astro-cid-k5z7lb4y> <span class="sr-only" data-astro-cid-k5z7lb4y>Close menu</span> <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" data-astro-cid-k5z7lb4y> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" data-astro-cid-k5z7lb4y></path> </svg> </button> </div> <nav class="overflow-y-auto p-6 space-y-8" data-astro-cid-k5z7lb4y> <div data-astro-cid-k5z7lb4y> <h3 class="font-display text-sm font-semibold text-white" data-astro-cid-k5z7lb4y> Getting Started </h3> <ul class="mt-3 space-y-2" data-astro-cid-k5z7lb4y> <li data-astro-cid-k5z7lb4y> <a href="/docs/getting-started/introduction" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Introduction </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/getting-started/installation" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Installation </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/getting-started/syntax-basics" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Syntax Basics </a> </li> </ul> </div><div data-astro-cid-k5z7lb4y> <h3 class="font-display text-sm font-semibold text-white" data-astro-cid-k5z7lb4y> Core Language </h3> <ul class="mt-3 space-y-2" data-astro-cid-k5z7lb4y> <li data-astro-cid-k5z7lb4y> <a href="/docs/core-language/data-types" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Data Types </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/core-language/operators" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Operators </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/core-language/variables" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Variables </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/core-language/functions" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Functions </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/core-language/control-flow" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Control Flow </a> </li> </ul> </div><div data-astro-cid-k5z7lb4y> <h3 class="font-display text-sm font-semibold text-white" data-astro-cid-k5z7lb4y> Data Structures </h3> <ul class="mt-3 space-y-2" data-astro-cid-k5z7lb4y> <li data-astro-cid-k5z7lb4y> <a href="/docs/data-structures/arrays-tensors" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Arrays &amp; Tensors </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/data-structures/indexing-slicing" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Indexing &amp; Slicing </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/data-structures/records" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Records </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/data-structures/strings" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Strings </a> </li> </ul> </div><div data-astro-cid-k5z7lb4y> <h3 class="font-display text-sm font-semibold text-white" data-astro-cid-k5z7lb4y> Functional Programming </h3> <ul class="mt-3 space-y-2" data-astro-cid-k5z7lb4y> <li data-astro-cid-k5z7lb4y> <a href="/docs/functional-programming/higher-order-functions" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Higher-Order Functions </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/functional-programming/do-blocks" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Do Blocks </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/functional-programming/recursion" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Recursion </a> </li> </ul> </div><div data-astro-cid-k5z7lb4y> <h3 class="font-display text-sm font-semibold text-white" data-astro-cid-k5z7lb4y> Mathematical Computing </h3> <ul class="mt-3 space-y-2" data-astro-cid-k5z7lb4y> <li data-astro-cid-k5z7lb4y> <a href="/docs/mathematical-computing/mathematical-functions" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Mathematical Functions </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/mathematical-computing/linear-algebra" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Linear Algebra </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/mathematical-computing/complex-numbers" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Complex Numbers </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/mathematical-computing/numerical-analysis" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Numerical Analysis </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/mathematical-computing/statistics" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Statistics </a> </li> </ul> </div><div data-astro-cid-k5z7lb4y> <h3 class="font-display text-sm font-semibold text-white" data-astro-cid-k5z7lb4y> Specialized Modules </h3> <ul class="mt-3 space-y-2" data-astro-cid-k5z7lb4y> <li data-astro-cid-k5z7lb4y> <a href="/docs/specialized-modules/dsp" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> DSP </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/specialized-modules/graph-theory" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Graph Theory </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/specialized-modules/optimization" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Optimization </a> </li> </ul> </div><div data-astro-cid-k5z7lb4y> <h3 class="font-display text-sm font-semibold text-white" data-astro-cid-k5z7lb4y> Advanced Topics </h3> <ul class="mt-3 space-y-2" data-astro-cid-k5z7lb4y> <li data-astro-cid-k5z7lb4y> <a href="/docs/advanced-topics/best-practices" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Best Practices </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/advanced-topics/examples" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Examples </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/advanced-topics/performance" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Performance </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/advanced-topics/mutability" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> Mutability </a> </li><li data-astro-cid-k5z7lb4y> <a href="/docs/advanced-topics/io-persistence" @click="$store.nav.close()" class="block text-sm transition-colors text-slate-400 hover:text-white" data-astro-cid-k5z7lb4y> I/O &amp; Persistence </a> </li> </ul> </div> </nav> </div> </div>  <div class="mx-auto max-w-8xl px-4 sm:px-6 lg:px-8"> <div class="flex"> <!-- Left sidebar (navigation) --> <div class="hidden lg:flex lg:flex-shrink-0"> <div class="w-64 py-8 pr-8 border-r border-slate-800"> <div class="sticky top-20"> <nav class="space-y-8"> <div> <h3 class="font-display text-sm font-semibold text-white"> Getting Started </h3> <ul class="mt-3 space-y-2"> <li> <a href="/docs/getting-started/introduction" class="block text-sm transition-colors text-slate-400 hover:text-white"> Introduction </a> </li><li> <a href="/docs/getting-started/installation" class="block text-sm transition-colors text-slate-400 hover:text-white"> Installation </a> </li><li> <a href="/docs/getting-started/syntax-basics" class="block text-sm transition-colors text-slate-400 hover:text-white"> Syntax Basics </a> </li> </ul> </div><div> <h3 class="font-display text-sm font-semibold text-white"> Core Language </h3> <ul class="mt-3 space-y-2"> <li> <a href="/docs/core-language/data-types" class="block text-sm transition-colors text-slate-400 hover:text-white"> Data Types </a> </li><li> <a href="/docs/core-language/operators" class="block text-sm transition-colors text-slate-400 hover:text-white"> Operators </a> </li><li> <a href="/docs/core-language/variables" class="block text-sm transition-colors text-slate-400 hover:text-white"> Variables </a> </li><li> <a href="/docs/core-language/functions" class="block text-sm transition-colors text-slate-400 hover:text-white"> Functions </a> </li><li> <a href="/docs/core-language/control-flow" class="block text-sm transition-colors text-slate-400 hover:text-white"> Control Flow </a> </li> </ul> </div><div> <h3 class="font-display text-sm font-semibold text-white"> Data Structures </h3> <ul class="mt-3 space-y-2"> <li> <a href="/docs/data-structures/arrays-tensors" class="block text-sm transition-colors text-slate-400 hover:text-white"> Arrays &amp; Tensors </a> </li><li> <a href="/docs/data-structures/indexing-slicing" class="block text-sm transition-colors text-slate-400 hover:text-white"> Indexing &amp; Slicing </a> </li><li> <a href="/docs/data-structures/records" class="block text-sm transition-colors text-slate-400 hover:text-white"> Records </a> </li><li> <a href="/docs/data-structures/strings" class="block text-sm transition-colors text-slate-400 hover:text-white"> Strings </a> </li> </ul> </div><div> <h3 class="font-display text-sm font-semibold text-white"> Functional Programming </h3> <ul class="mt-3 space-y-2"> <li> <a href="/docs/functional-programming/higher-order-functions" class="block text-sm transition-colors text-slate-400 hover:text-white"> Higher-Order Functions </a> </li><li> <a href="/docs/functional-programming/do-blocks" class="block text-sm transition-colors text-slate-400 hover:text-white"> Do Blocks </a> </li><li> <a href="/docs/functional-programming/recursion" class="block text-sm transition-colors text-slate-400 hover:text-white"> Recursion </a> </li> </ul> </div><div> <h3 class="font-display text-sm font-semibold text-white"> Mathematical Computing </h3> <ul class="mt-3 space-y-2"> <li> <a href="/docs/mathematical-computing/mathematical-functions" class="block text-sm transition-colors text-slate-400 hover:text-white"> Mathematical Functions </a> </li><li> <a href="/docs/mathematical-computing/linear-algebra" class="block text-sm transition-colors text-slate-400 hover:text-white"> Linear Algebra </a> </li><li> <a href="/docs/mathematical-computing/complex-numbers" class="block text-sm transition-colors text-slate-400 hover:text-white"> Complex Numbers </a> </li><li> <a href="/docs/mathematical-computing/numerical-analysis" class="block text-sm transition-colors text-slate-400 hover:text-white"> Numerical Analysis </a> </li><li> <a href="/docs/mathematical-computing/statistics" class="block text-sm transition-colors text-slate-400 hover:text-white"> Statistics </a> </li> </ul> </div><div> <h3 class="font-display text-sm font-semibold text-white"> Specialized Modules </h3> <ul class="mt-3 space-y-2"> <li> <a href="/docs/specialized-modules/dsp" class="block text-sm transition-colors text-slate-400 hover:text-white"> DSP </a> </li><li> <a href="/docs/specialized-modules/graph-theory" class="block text-sm transition-colors text-slate-400 hover:text-white"> Graph Theory </a> </li><li> <a href="/docs/specialized-modules/optimization" class="block text-sm transition-colors text-slate-400 hover:text-white"> Optimization </a> </li> </ul> </div><div> <h3 class="font-display text-sm font-semibold text-white"> Advanced Topics </h3> <ul class="mt-3 space-y-2"> <li> <a href="/docs/advanced-topics/best-practices" class="block text-sm transition-colors text-slate-400 hover:text-white"> Best Practices </a> </li><li> <a href="/docs/advanced-topics/examples" class="block text-sm transition-colors text-slate-400 hover:text-white"> Examples </a> </li><li> <a href="/docs/advanced-topics/performance" class="block text-sm transition-colors text-slate-400 hover:text-white"> Performance </a> </li><li> <a href="/docs/advanced-topics/mutability" class="block text-sm transition-colors text-slate-400 hover:text-white"> Mutability </a> </li><li> <a href="/docs/advanced-topics/io-persistence" class="block text-sm transition-colors text-slate-400 hover:text-white"> I/O &amp; Persistence </a> </li> </ul> </div> </nav> </div> </div> </div> <!-- Main content --> <div class="min-w-0 flex-1 py-8 lg:pl-8"> <article class="prose prose-invert max-w-none"> <h1 class="font-display text-4xl font-bold tracking-tight text-white"> Performance and Limitations </h1> <p class="lead text-xl text-slate-400"> Performance characteristics and limitations of Achronyme </p>  <p>This document describes current performance limitations in Achronyme and workarounds.</p>
<h2 id="stack-overflow-with-deep-recursion">Stack Overflow with Deep Recursion</h2>
<h3 id="problem">Problem</h3>
<p>Achronyme currently has a <strong>strict recursion depth limit of approximately 50-100 calls</strong> before encountering stack overflow.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#6A737D">// This WILL cause stack overflow:</span></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#B392F0"> range</span><span style="color:#F97583"> =</span><span style="color:#FFAB70"> n</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    (</span><span style="color:#FFAB70">left</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">current</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">vector</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span></span>
<span class="line"><span style="color:#B392F0">        if</span><span style="color:#E1E4E8">(left </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">, vector, </span><span style="color:#B392F0">rec</span><span style="color:#E1E4E8">(left </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">, current </span><span style="color:#F97583">+</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">, [</span><span style="color:#F97583">...</span><span style="color:#E1E4E8">vector, current]))</span></span>
<span class="line"><span style="color:#E1E4E8">)(n, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, [])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">range</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">5</span><span style="color:#E1E4E8">)    </span><span style="color:#6A737D">// ✅ Works: [0, 1, 2, 3, 4]</span></span>
<span class="line"><span style="color:#B392F0">range</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">50</span><span style="color:#E1E4E8">)   </span><span style="color:#6A737D">// ❌ Stack overflow!</span></span></code></pre>
<h3 id="why-this-happens">Why This Happens</h3>
<p>Each recursive call with <code>rec</code> involves:</p>
<ol>
<li><strong>Environment Cloning</strong>: The entire evaluation environment is cloned (all variables)</li>
<li><strong>Function Cloning</strong>: The function itself is cloned to bind to <code>rec</code></li>
<li><strong>Scope Management</strong>: New scopes are pushed and popped</li>
<li><strong>Vector Growth</strong>: With patterns like <code>[...vector, element]</code>, progressively larger vectors are created</li>
<li><strong>Stack Frames</strong>: Each recursion creates a new Rust stack frame</li>
</ol>
<p><strong>Example with <code>range(50)</code>:</strong></p>
<ul>
<li>Call 1: Creates <code>[0]</code></li>
<li>Call 2: Creates <code>[0, 1]</code></li>
<li>Call 3: Creates <code>[0, 1, 2]</code></li>
<li>…</li>
<li>Call 50: Creates <code>[0, 1, 2, ..., 49]</code></li>
</ul>
<p>At depth 50, you have:</p>
<ul>
<li>50 nested stack frames</li>
<li>50 cloned environments</li>
<li>50 cloned functions</li>
<li>Intermediate vectors totaling ~1,275 elements (sum of 1+2+3+…+50)</li>
</ul>
<p>This quickly exhausts Rust’s default <strong>2MB stack size</strong>.</p>
<h3 id="root-cause">Root Cause</h3>
<p>The implementation in <code>crates/achronyme-eval/src/handlers/functions.rs</code> (line 32-107) clones the environment and function on every recursive call:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="rust"><code><span class="line"><span style="color:#6A737D">// Line 51: Clone entire environment</span></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> saved_env </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> evaluator</span><span style="color:#F97583">.</span><span style="color:#B392F0">environment</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">.</span><span style="color:#B392F0">clone</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Line 58: Clone closure environment</span></span>
<span class="line"><span style="color:#F97583">*</span><span style="color:#E1E4E8">evaluator</span><span style="color:#F97583">.</span><span style="color:#B392F0">environment_mut</span><span style="color:#E1E4E8">() </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">**</span><span style="color:#E1E4E8">closure_env)</span><span style="color:#F97583">.</span><span style="color:#B392F0">clone</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Line 62: Clone and bind 'rec'</span></span>
<span class="line"><span style="color:#E1E4E8">evaluator</span><span style="color:#F97583">.</span><span style="color:#B392F0">environment_mut</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">.</span><span style="color:#B392F0">define</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"rec"</span><span style="color:#F97583">.</span><span style="color:#B392F0">to_string</span><span style="color:#E1E4E8">(), </span><span style="color:#B392F0">Value</span><span style="color:#F97583">::</span><span style="color:#B392F0">Function</span><span style="color:#E1E4E8">(function</span><span style="color:#F97583">.</span><span style="color:#B392F0">clone</span><span style="color:#E1E4E8">()))</span><span style="color:#F97583">?</span><span style="color:#E1E4E8">;</span></span></code></pre>
<p>This is necessary for correctness (proper scoping and closure capture) but has performance implications.</p>
<h2 id="workarounds">Workarounds</h2>
<h3 id="1-use-built-in-functions">1. Use Built-in Functions</h3>
<p>When available, use built-in functions instead of recursion:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#6A737D">// ❌ Don't use recursive range for large n</span></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#B392F0"> range</span><span style="color:#F97583"> =</span><span style="color:#FFAB70"> n</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    (</span><span style="color:#FFAB70">left</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">current</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">vector</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span></span>
<span class="line"><span style="color:#B392F0">        if</span><span style="color:#E1E4E8">(left </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">, vector, </span><span style="color:#B392F0">rec</span><span style="color:#E1E4E8">(left </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">, current </span><span style="color:#F97583">+</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">, [</span><span style="color:#F97583">...</span><span style="color:#E1E4E8">vector, current]))</span></span>
<span class="line"><span style="color:#E1E4E8">)(n, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, [])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// ✅ Use built-in linspace instead</span></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#B392F0"> range</span><span style="color:#F97583"> =</span><span style="color:#FFAB70"> n</span><span style="color:#F97583"> =></span><span style="color:#B392F0"> linspace</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, n </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">, n)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">range</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">100</span><span style="color:#E1E4E8">)   </span><span style="color:#6A737D">// ✅ Works!</span></span>
<span class="line"><span style="color:#B392F0">range</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1000</span><span style="color:#E1E4E8">)  </span><span style="color:#6A737D">// ✅ Works!</span></span></code></pre>
<h3 id="2-limit-recursion-depth">2. Limit Recursion Depth</h3>
<p>Keep recursive calls under <strong>~40-50</strong> for safety:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#6A737D">// Safe: Small recursion depth</span></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#B392F0"> factorial</span><span style="color:#F97583"> =</span><span style="color:#FFAB70"> n</span><span style="color:#F97583"> =></span></span>
<span class="line"><span style="color:#B392F0">    if</span><span style="color:#E1E4E8">(n </span><span style="color:#F97583">&#x3C;=</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, n </span><span style="color:#F97583">*</span><span style="color:#B392F0"> rec</span><span style="color:#E1E4E8">(n </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">factorial</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">10</span><span style="color:#E1E4E8">)   </span><span style="color:#6A737D">// ✅ Safe</span></span>
<span class="line"><span style="color:#B392F0">factorial</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">20</span><span style="color:#E1E4E8">)   </span><span style="color:#6A737D">// ✅ Safe</span></span>
<span class="line"><span style="color:#B392F0">factorial</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">50</span><span style="color:#E1E4E8">)   </span><span style="color:#6A737D">// ❌ Stack overflow risk</span></span></code></pre>
<h3 id="3-use-iteration-over-recursion">3. Use Iteration Over Recursion</h3>
<p>When possible, express problems using higher-order functions instead of recursion:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#6A737D">// ❌ Recursive sum (limited depth)</span></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#B392F0"> sum_recursive</span><span style="color:#F97583"> =</span><span style="color:#FFAB70"> arr</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    (</span><span style="color:#FFAB70">remaining</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">acc</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span></span>
<span class="line"><span style="color:#B392F0">        if</span><span style="color:#E1E4E8">(remaining[</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">==</span><span style="color:#E1E4E8"> remaining[</span><span style="color:#F97583">-</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">],</span></span>
<span class="line"><span style="color:#E1E4E8">           acc </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> remaining[</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">],</span></span>
<span class="line"><span style="color:#B392F0">           rec</span><span style="color:#E1E4E8">(remaining[</span><span style="color:#79B8FF">1.</span><span style="color:#E1E4E8">.], acc </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> remaining[</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">]))</span></span>
<span class="line"><span style="color:#E1E4E8">)(arr, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// ✅ Use built-in reduce (handles any size)</span></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#B392F0"> sum_iterative</span><span style="color:#F97583"> =</span><span style="color:#FFAB70"> arr</span><span style="color:#F97583"> =></span><span style="color:#B392F0"> reduce</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">acc</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">x</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> acc </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> x, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, arr)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">sum_iterative</span><span style="color:#E1E4E8">([</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">3</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">...</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">100</span><span style="color:#E1E4E8">])  </span><span style="color:#6A737D">// ✅ Works!</span></span></code></pre>
<h3 id="4-break-large-problems-into-chunks">4. Break Large Problems into Chunks</h3>
<p>Instead of one deep recursion, process in smaller batches:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#6A737D">// Process 10 elements at a time</span></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#B392F0"> process_batch</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">data</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">batch_size</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#6A737D">    // ... implementation using smaller recursive depth</span></span>
<span class="line"><span style="color:#E1E4E8">)</span></span></code></pre>
<h2 id="performance-comparison">Performance Comparison</h2>



































<table><thead><tr><th>Approach</th><th>Max Size</th><th>Performance</th><th>Stack Safety</th></tr></thead><tbody><tr><td>Deep recursion</td><td>~50</td><td>Fast for small n</td><td>❌ Unsafe</td></tr><tr><td>Built-in functions</td><td>Unlimited</td><td>Very fast</td><td>✅ Safe</td></tr><tr><td>Higher-order (map/reduce)</td><td>Unlimited</td><td>Fast</td><td>✅ Safe</td></tr><tr><td>Chunked processing</td><td>Unlimited</td><td>Moderate</td><td>✅ Safe</td></tr></tbody></table>
<h2 id="affected-patterns">Affected Patterns</h2>
<p>These recursive patterns are <strong>limited to ~50 iterations</strong>:</p>
<h3 id="range-generation">Range Generation</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F97583">let</span><span style="color:#B392F0"> range</span><span style="color:#F97583"> =</span><span style="color:#FFAB70"> n</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    (</span><span style="color:#FFAB70">left</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">current</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">vector</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span></span>
<span class="line"><span style="color:#B392F0">        if</span><span style="color:#E1E4E8">(left </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">, vector, </span><span style="color:#B392F0">rec</span><span style="color:#E1E4E8">(left </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">, current </span><span style="color:#F97583">+</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">, [</span><span style="color:#F97583">...</span><span style="color:#E1E4E8">vector, current]))</span></span>
<span class="line"><span style="color:#E1E4E8">)(n, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, [])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// ✅ Use instead: linspace(0, n-1, n)</span></span></code></pre>
<h3 id="repeatfill">Repeat/Fill</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F97583">let</span><span style="color:#B392F0"> zeros</span><span style="color:#F97583"> =</span><span style="color:#FFAB70"> n</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    (</span><span style="color:#FFAB70">left</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">vector</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span></span>
<span class="line"><span style="color:#B392F0">        if</span><span style="color:#E1E4E8">(left </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">, vector, </span><span style="color:#B392F0">rec</span><span style="color:#E1E4E8">(left </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">, [</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">...</span><span style="color:#E1E4E8">vector]))</span></span>
<span class="line"><span style="color:#E1E4E8">)(n, [])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// ✅ Use instead: map(_ => 0, linspace(0, n-1, n))</span></span></code></pre>
<h3 id="factorial-with-accumulator">Factorial with Accumulator</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F97583">let</span><span style="color:#B392F0"> factorial_acc</span><span style="color:#F97583"> =</span><span style="color:#FFAB70"> n</span><span style="color:#F97583"> =></span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    (</span><span style="color:#FFAB70">current</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">acc</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span></span>
<span class="line"><span style="color:#B392F0">        if</span><span style="color:#E1E4E8">(current </span><span style="color:#F97583">&#x3C;=</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">, acc, </span><span style="color:#B392F0">rec</span><span style="color:#E1E4E8">(current </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">, acc </span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> current))</span></span>
<span class="line"><span style="color:#E1E4E8">)(n, </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// ⚠️ Limited to n &#x3C; 50</span></span></code></pre>
<h3 id="fibonacci">Fibonacci</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F97583">let</span><span style="color:#B392F0"> fibonacci</span><span style="color:#F97583"> =</span><span style="color:#FFAB70"> n</span><span style="color:#F97583"> =></span></span>
<span class="line"><span style="color:#B392F0">    if</span><span style="color:#E1E4E8">(n </span><span style="color:#F97583">&#x3C;=</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">, n, </span><span style="color:#B392F0">rec</span><span style="color:#E1E4E8">(n </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">+</span><span style="color:#B392F0"> rec</span><span style="color:#E1E4E8">(n </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> 2</span><span style="color:#E1E4E8">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// ⚠️ Limited to n &#x3C; 50</span></span>
<span class="line"><span style="color:#6A737D">// Note: Also exponentially slow without memoization</span></span></code></pre>
<h2 id="safe-recursive-patterns">Safe Recursive Patterns</h2>
<p>These patterns are safe because they have naturally small depth:</p>
<h3 id="tree-traversal-limited-depth">Tree Traversal (Limited Depth)</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F97583">let</span><span style="color:#B392F0"> tree_depth</span><span style="color:#F97583"> =</span><span style="color:#FFAB70"> node</span><span style="color:#F97583"> =></span></span>
<span class="line"><span style="color:#B392F0">    if</span><span style="color:#E1E4E8">(node.left </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> undefined</span><span style="color:#F97583"> &#x26;&#x26;</span><span style="color:#E1E4E8"> node.right </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> undefined</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">       1</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">       1</span><span style="color:#F97583"> +</span><span style="color:#B392F0"> max</span><span style="color:#E1E4E8">([</span></span>
<span class="line"><span style="color:#B392F0">           if</span><span style="color:#E1E4E8">(node.left </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> undefined</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">rec</span><span style="color:#E1E4E8">(node.left)),</span></span>
<span class="line"><span style="color:#B392F0">           if</span><span style="color:#E1E4E8">(node.right </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> undefined</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">rec</span><span style="color:#E1E4E8">(node.right))</span></span>
<span class="line"><span style="color:#E1E4E8">       ]))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// ✅ Safe for balanced trees with depth &#x3C; 50</span></span></code></pre>
<h3 id="gcd-euclidean-algorithm">GCD (Euclidean Algorithm)</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F97583">let</span><span style="color:#B392F0"> gcd</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">a</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">b</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    (</span><span style="color:#FFAB70">x</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">y</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#B392F0"> if</span><span style="color:#E1E4E8">(y </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">, x, </span><span style="color:#B392F0">rec</span><span style="color:#E1E4E8">(y, x </span><span style="color:#F97583">%</span><span style="color:#E1E4E8"> y))</span></span>
<span class="line"><span style="color:#E1E4E8">)(a, b)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// ✅ Safe - typically terminates in &#x3C; 20 iterations</span></span>
<span class="line"><span style="color:#B392F0">gcd</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">48</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">18</span><span style="color:#E1E4E8">)   </span><span style="color:#6A737D">// 6</span></span>
<span class="line"><span style="color:#B392F0">gcd</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1000</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">35</span><span style="color:#E1E4E8">) </span><span style="color:#6A737D">// 5</span></span></code></pre>
<h3 id="small-factorials">Small Factorials</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F97583">let</span><span style="color:#B392F0"> factorial</span><span style="color:#F97583"> =</span><span style="color:#FFAB70"> n</span><span style="color:#F97583"> =></span></span>
<span class="line"><span style="color:#B392F0">    if</span><span style="color:#E1E4E8">(n </span><span style="color:#F97583">&#x3C;=</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">, n </span><span style="color:#F97583">*</span><span style="color:#B392F0"> rec</span><span style="color:#E1E4E8">(n </span><span style="color:#F97583">-</span><span style="color:#79B8FF"> 1</span><span style="color:#E1E4E8">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// ✅ Safe for n &#x3C; 40</span></span>
<span class="line"><span style="color:#B392F0">factorial</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">10</span><span style="color:#E1E4E8">)  </span><span style="color:#6A737D">// 3628800</span></span></code></pre>
<h2 id="future-improvements">Future Improvements</h2>
<p>Potential optimizations being considered:</p>
<ol>
<li><strong>Tail Call Optimization</strong>: Detect tail-recursive patterns and optimize them</li>
<li><strong>Iterative Lowering</strong>: Compile certain recursive patterns to loops</li>
<li><strong>Lazy Evaluation</strong>: Delay vector construction until needed</li>
<li><strong>Stack Size Increase</strong>: Configure larger stack size for Rust runtime</li>
<li><strong>Reference Counting</strong>: Reduce cloning by using Rc/Arc more aggressively</li>
</ol>
<h2 id="best-practices">Best Practices</h2>
<ol>
<li>✅ <strong>Prefer built-in functions</strong> over recursion when available</li>
<li>✅ <strong>Test with realistic data sizes</strong> - don’t assume recursion scales</li>
<li>✅ <strong>Keep recursion depth &#x3C; 40</strong> for safety margin</li>
<li>✅ <strong>Use <code>map</code>, <code>reduce</code>, <code>filter</code></strong> instead of manual recursion</li>
<li>⚠️ <strong>Avoid recursive patterns with vector growth</strong> (like <code>[...acc, elem]</code>)</li>
<li>⚠️ <strong>Profile before optimizing</strong> - measure actual performance</li>
</ol>
<h2 id="testing-recursion-limits">Testing Recursion Limits</h2>
<p>To test if your recursive function will work:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#6A737D">// Test with small input first</span></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> test </span><span style="color:#F97583">=</span><span style="color:#B392F0"> my_recursive_fn</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">5</span><span style="color:#E1E4E8">)    </span><span style="color:#6A737D">// ✅ Works</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Gradually increase</span></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> test </span><span style="color:#F97583">=</span><span style="color:#B392F0"> my_recursive_fn</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">10</span><span style="color:#E1E4E8">)   </span><span style="color:#6A737D">// ✅ Works</span></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> test </span><span style="color:#F97583">=</span><span style="color:#B392F0"> my_recursive_fn</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">20</span><span style="color:#E1E4E8">)   </span><span style="color:#6A737D">// ✅ Works</span></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> test </span><span style="color:#F97583">=</span><span style="color:#B392F0"> my_recursive_fn</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">40</span><span style="color:#E1E4E8">)   </span><span style="color:#6A737D">// ⚠️ Check carefully</span></span>
<span class="line"><span style="color:#F97583">let</span><span style="color:#E1E4E8"> test </span><span style="color:#F97583">=</span><span style="color:#B392F0"> my_recursive_fn</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">50</span><span style="color:#E1E4E8">)   </span><span style="color:#6A737D">// ❌ Likely overflow</span></span></code></pre>
<h2 id="summary">Summary</h2>
<ul>
<li><strong>Current limit</strong>: ~50 recursive calls</li>
<li><strong>Root cause</strong>: Environment/function cloning on each <code>rec</code> call</li>
<li><strong>Workaround</strong>: Use built-in functions and higher-order functions</li>
<li><strong>Safe patterns</strong>: GCD, small factorials, shallow tree traversal</li>
<li><strong>Unsafe patterns</strong>: Large ranges, deep recursion, recursive vector building</li>
</ul>
<hr>
<p><strong>See Also</strong>:</p>
<ul>
<li><a href="06-functions.md">Functions and Lambdas</a> - Recursion basics</li>
<li><a href="11-higher-order-functions.md">Higher-Order Functions</a> - Alternatives to recursion</li>
<li><a href="../examples/soc/37-advanced-recursion-patterns.soc">Advanced Recursion Patterns</a> - Examples</li>
</ul>  </article> <div class="mt-12 border-t border-slate-800 pt-6"> <nav class="flex items-center justify-between"> <div></div> <div></div> </nav> </div> </div> <!-- Right sidebar (table of contents) --> <div class="hidden xl:flex xl:flex-shrink-0"> <div class="w-64 py-8 pl-8 border-l border-slate-800"> <div class="sticky top-20 max-h-[calc(100vh-6rem)] overflow-y-auto"> <div class="space-y-4"><h4 class="font-display text-sm font-semibold text-white">
On this page
</h4><nav><ul class="space-y-2.5 text-sm"><li class><a href="#stack-overflow-with-deep-recursion" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">Stack Overflow with Deep Recursion</a></li><li class="ml-4"><a href="#problem" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">Problem</a></li><li class="ml-4"><a href="#why-this-happens" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">Why This Happens</a></li><li class="ml-4"><a href="#root-cause" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">Root Cause</a></li><li class><a href="#workarounds" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">Workarounds</a></li><li class="ml-4"><a href="#1-use-built-in-functions" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">1. Use Built-in Functions</a></li><li class="ml-4"><a href="#2-limit-recursion-depth" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">2. Limit Recursion Depth</a></li><li class="ml-4"><a href="#3-use-iteration-over-recursion" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">3. Use Iteration Over Recursion</a></li><li class="ml-4"><a href="#4-break-large-problems-into-chunks" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">4. Break Large Problems into Chunks</a></li><li class><a href="#performance-comparison" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">Performance Comparison</a></li><li class><a href="#affected-patterns" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">Affected Patterns</a></li><li class="ml-4"><a href="#range-generation" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">Range Generation</a></li><li class="ml-4"><a href="#repeatfill" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">Repeat/Fill</a></li><li class="ml-4"><a href="#factorial-with-accumulator" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">Factorial with Accumulator</a></li><li class="ml-4"><a href="#fibonacci" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">Fibonacci</a></li><li class><a href="#safe-recursive-patterns" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">Safe Recursive Patterns</a></li><li class="ml-4"><a href="#tree-traversal-limited-depth" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">Tree Traversal (Limited Depth)</a></li><li class="ml-4"><a href="#gcd-euclidean-algorithm" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">GCD (Euclidean Algorithm)</a></li><li class="ml-4"><a href="#small-factorials" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">Small Factorials</a></li><li class><a href="#future-improvements" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">Future Improvements</a></li><li class><a href="#best-practices" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">Best Practices</a></li><li class><a href="#testing-recursion-limits" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">Testing Recursion Limits</a></li><li class><a href="#summary" class="block text-slate-400 hover:text-white transition-colors" x-data="{ active: false }" x-init="
                const observer = new IntersectionObserver(
                  (entries) => {
                    entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                        active = true;
                      } else {
                        active = false;
                      }
                    });
                  },
                  { rootMargin: '-80px 0px -80% 0px' }
                );
                const target = document.getElementById($el.getAttribute('href').slice(1));
                if (target) observer.observe(target);
              " :class="active && 'font-medium text-purple-400'">Summary</a></li></ul></nav></div> </div> </div> </div> </div> </div> </div>  </body></html>